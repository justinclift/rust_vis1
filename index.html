<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8" />
	<title>Rust visualisation test 1</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<style>
		body,pre { margin:0;padding:0; }
		#barchart {
			position:fixed;
			opacity:1.0;
			width: 100%;
			height:100%;
			top:0;right:0;bottom:0;left:0;
			border: 1px solid black;
		}
	</style>
</head>
<body>
	<canvas id="barchart">Your browser doesn't appear to support the canvas tag.</canvas>
<script>
    <!-- This *must* be declared using "var" instead of "let" or "const", otherwise it won't be in the global scope for Rust to access. -->
    var $scope = {};
    $scope.db = {
        Tablename: "100m2012Autumn",
        Records: [
			[
				{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},
				{"Name":"Beach","Type":3,"Value":"Ardglass"},
				{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},
				{"Name":"Year","Type":3,"Value":"2012"},
				{"Name":"Season","Type":3,"Value":"Autumn"},
				{"Name":"Season.Number","Type":3,"Value":"4"},
				{"Name":"Date","Type":3,"Value":"10/10/2012"},
				{"Name":"Tide","Type":3,"Value":""},
				{"Name":"Prevailing.Wind","Type":3,"Value":""},
				{"Name":"OSPAR.ID","Type":4,"Value":"54"},
				{"Name":"Category","Type":3,"Value":"Cloth"},
				{"Name":"Item","Type":3,"Value":"Clothing"},
				{"Name":"Number","Type":4,"Value":"15"}
			],
			[
				{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},
				{"Name":"Beach","Type":3,"Value":"Ardglass"},
				{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},
				{"Name":"Year","Type":3,"Value":"2012"},
				{"Name":"Season","Type":3,"Value":"Autumn"},
				{"Name":"Season.Number","Type":3,"Value":"4"},
				{"Name":"Date","Type":3,"Value":"10/10/2012"},
				{"Name":"Tide","Type":3,"Value":""},
				{"Name":"Prevailing.Wind","Type":3,"Value":""},
				{"Name":"OSPAR.ID","Type":4,"Value":"55"},
				{"Name":"Category","Type":3,"Value":"Cloth"},
				{"Name":"Item","Type":3,"Value":"Furnishings"},
				{"Name":"Number","Type":4,"Value":"1"}
			],
			[
				{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"56"},{"Name":"Category","Type":3,"Value":"Cloth"},{"Name":"Item","Type":3,"Value":"Sacking"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"57"},{"Name":"Category","Type":3,"Value":"Cloth"},{"Name":"Item","Type":3,"Value":"Shoes (leather)"},{"Name":"Number","Type":4,"Value":"4"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"59"},{"Name":"Category","Type":3,"Value":"Cloth"},{"Name":"Item","Type":3,"Value":"Other (specify)"},{"Name":"Number","Type":4,"Value":"38"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"121"},{"Name":"Category","Type":3,"Value":"Faeces"},{"Name":"Item","Type":3,"Value":"Bagged dog faeces"},{"Name":"Number","Type":4,"Value":"1"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":3,"Value":"NA"},{"Name":"Category","Type":3,"Value":"Faeces"},{"Name":"Item","Type":3,"Value":"non Bagged dog faeces"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"91"},{"Name":"Category","Type":3,"Value":"Glass"},{"Name":"Item","Type":3,"Value":"Bottles"},{"Name":"Number","Type":4,"Value":"127"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"92"},{"Name":"Category","Type":3,"Value":"Glass"},{"Name":"Item","Type":3,"Value":"Light bulbs / tubes"},{"Name":"Number","Type":4,"Value":"2"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"93"},{"Name":"Category","Type":3,"Value":"Glass"},{"Name":"Item","Type":3,"Value":"Other glass items"},{"Name":"Number","Type":4,"Value":"5"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"103"},{"Name":"Category","Type":3,"Value":"Medical"},{"Name":"Item","Type":3,"Value":"Containers/tubes/pill packet"},{"Name":"Number","Type":4,"Value":"4"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"104"},{"Name":"Category","Type":3,"Value":"Medical"},{"Name":"Item","Type":3,"Value":"Syringes"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"105"},{"Name":"Category","Type":3,"Value":"Medical"},{"Name":"Item","Type":3,"Value":"Other (specify)"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"76"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Aerosol /spraycans"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"77"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Bottle caps"},{"Name":"Number","Type":4,"Value":"8"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"78"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Drink cans"},{"Name":"Number","Type":4,"Value":"37"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"79"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Electric Appliances"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"80"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Fishing weights / hooks / lures"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"81"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Foil wrappers"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"82"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Food cans"},{"Name":"Number","Type":4,"Value":"1"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"83"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Industrial scrap"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"84"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Oil drums"},{"Name":"Number","Type":4,"Value":"0"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"86"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"paint tins"},{"Name":"Number","Type":4,"Value":"1"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"87"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Lobster / crab pots \u0026 tops"},{"Name":"Number","Type":4,"Value":"2"}],[{"Name":"SurveyID","Type":3,"Value":"100m2012Autumn"},{"Name":"Beach","Type":3,"Value":"Ardglass"},{"Name":"OSPAR.BeachID","Type":3,"Value":"UK025"},{"Name":"Year","Type":3,"Value":"2012"},{"Name":"Season","Type":3,"Value":"Autumn"},{"Name":"Season.Number","Type":3,"Value":"4"},{"Name":"Date","Type":3,"Value":"10/10/2012"},{"Name":"Tide","Type":3,"Value":""},{"Name":"Prevailing.Wind","Type":3,"Value":""},{"Name":"OSPAR.ID","Type":4,"Value":"88"},{"Name":"Category","Type":3,"Value":"Metal"},{"Name":"Item","Type":3,"Value":"Wire / wire mesh / barbed wire"},{"Name":"Number","Type":4,"Value":"19"}]],
        ColNames: ["SurveyID","Beach","OSPAR.BeachID","Year","Season","Season.Number","Date","Tide","Prevailing.Wind","OSPAR.ID","Category","Item","Number"],
        RowCount:  1568 ,
        ColCount:  13 ,
        SortCol:  "",
        SortDir:  "",
        Offset:    0 ,
    };
</script>

	<!-- Include the JS generated by `wasm-pack build` -->
	<script src='pkg/rust_vis1.js'></script>

	<!-- Note the usage of `type=module` here as this is an ES6 module -->
	<script type="module">
		// Like with the `--target web` output the exports are immediately
		// available but they won't work until we initialize the module. Unlike
		// `--target web`, however, the globals are all stored on a
		// `wasm_bindgen` global. The global itself is the initialization
		// function and then the properties of the global are all the exported
		// functions.
		//
		// Note that the name `wasm_bindgen` can be configured with the
		// `--no-modules-global` CLI flag
		const { main } = wasm_bindgen;

		// Pass mouse clicks through to the wasm handler
		function clickHandler(evt) {
			click_handler(evt.clientX, evt.clientY);
		}

		// Pass key presses through to the wasm handler
		function keyPressHandler(evt) {
			let key = 0;
			// ...

			// console.log("JS: Key pressed = " + key);
			key_press_handler(key);
		}

		// Pass mouse movement events through to the wasm handler
		function moveHandler(evt) {
			// console.log(evt);
			move_handler(evt.clientX, evt.clientY);
		}

		// Pass mouse wheel events through to its wasm handler
		function wheelHandler(evt) {
			wheel_handler(evt.deltaY);
		}

		// Launch the wasm file
		async function run() {
			await wasm_bindgen('./pkg/rust_vis1_bg.wasm');
			main();

			// Set up event handlers
			// document.addEventListener("keydown", keyPressHandler);
			// document.getElementById("mycanvas").addEventListener("mousedown", clickHandler);
			// document.getElementById("mycanvas").addEventListener("mousemove", moveHandler);
			// document.getElementById("mycanvas").addEventListener("wheel", wheelHandler);
		}
		run();
	</script>
</body>
</html>
